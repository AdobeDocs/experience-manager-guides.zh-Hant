---
title: AEM網站
description: 從地圖控制面板在AEM Guides中建立及設定AEM網站預設集。 使用AEM網站支援來產生文章型輸出、發佈連結的主題、conref，以及在內容中搜尋字串。
feature: Publishing
role: User
hide: true
exl-id: 41c0d4d5-5c46-4d2b-90b3-8c441fee8e99
source-git-commit: 26fa1e52920c1f1abd5655b9ca7341600a9bca67
workflow-type: tm+mt
source-wordcount: '2404'
ht-degree: 0%

---

# 地圖儀表板上的AEM Sites預設集 {#id205BE3008SW}

您可以從地圖控制面板建立AEM Sites預設集，並將其設定為產生AEM Sites輸出。


下列選項適用於AEM Sites輸出：

| AEM Sites選項 | 描述 |
| --- | --- |
| 輸出類型 | 您要產生的輸出型別。 若要產生回應式AEM Sites輸出，請選擇AEM Sites選項。 |
| 設定名稱 | 為您正在建立的AEM Sites設定提供描述性名稱。 例如，您可以指定&#x200B;*內部客戶輸出*&#x200B;或&#x200B;*一般使用者輸出*。 |
| 網站名稱 | 儲存輸出至AEM存放庫的網站名稱。<br><br>AEM存放庫中的節點是以此處指定的名稱建立的。 如果您未指定「場地名稱」，則會以DITA map檔案名稱建立場地節點。<br><br>您在此指定的網站名稱也會當作瀏覽器標籤中的標題。<br><br>您也可以在設定網站名稱時使用變數。 如需有關使用變數的詳細資訊，請參閱[使用變數來設定目的地路徑、網站名稱或檔案名稱選項](generate-output-use-variables.md#id18BUG70K05Z)。 |
| 設計 | 選取您要用來產生輸出的設計範本。<br><br>如需有關如何使用自訂設計範本產生輸出的詳細資訊，請連絡您的發佈系統管理員。 |
| 目的地路徑 | AEM存放庫內儲存輸出的路徑。 在產生最終輸出時，網站名稱和目的地路徑會合併。 例如，如果您將網站名稱指定為`user-guide`，將目的地路徑指定為`/content/output/aem-guides`，則最終輸出會在`/content/output/aem-guides/user-guide`節點下產生。<br><br>您也可以在設定目的地路徑時使用變數。 如需有關使用變數的詳細資訊，請參閱[使用變數來設定目的地路徑、網站名稱或檔案名稱選項](generate-output-use-variables.md#id18BUG70K05Z)。 |
| 套用條件，使用 | 選取下列其中一個選項：<br><br>**未套用**：如果您不想在發佈的輸出上套用任何條件，請選取此選項。<br>**DITAVal檔案**：選取DITAVal檔案以產生條件式內容。 您可以使用瀏覽對話方塊或輸入檔案路徑來選取多個DITAVal檔案。 使用檔案名稱附近的十字圖示可將其移除。 DITAVal檔案會依指定的順序計算，因此第一個檔案中指定的條件優先於後續檔案中指定的相符條件。 您可以透過新增或刪除檔案來維持檔案順序。 如果DITAVal檔案被移動到其他位置或被刪除，它不會自動從對映圖示板中刪除。 您必須更新位置，才能移動或刪除檔案。 您可以將滑鼠停留在檔案名稱上，以檢視儲存該檔案的AEM存放庫中的路徑。 您只能選取DITAVal檔案，如果您選取任何其他檔案型別，則會顯示錯誤。<br>**條件預設集**：從下拉式清單中選取條件預設集，以在發佈輸出時套用條件。 如果您已為DITA map檔案新增條件，則會顯示此選項。 條件設定可在DITA map主控台的「條件預設集」標籤中使用。 若要進一步瞭解條件預設集，請參閱[使用條件預設集](generate-output-use-condition-presets.md#id1825FL004PN)。 |
| 現有的輸出頁面 | 選取&#x200B;**覆寫內容**&#x200B;選項，以覆寫現有頁面中的內容。 此選項只會覆寫存在於頁面內容和標題節點下方的內容。 此選項可啟用混合式發佈內容。 選取此選項可提供一個選項，讓您選取從已發佈輸出中刪除孤立頁面。 這也是建立AEM Sites輸出的&#x200B;*預設*&#x200B;選項。<br><br>選取&#x200B;**刪除並建立**&#x200B;選項，以在發佈期間強制刪除任何現有頁面。 此選項會刪除頁面節點，及其內容和其下的所有子頁面。 如果您已變更輸出預設集的設計範本，或想要移除目的地中已存在的任何額外頁面，請使用此選項。 |
| 刪除孤立的網站頁面 | 在&#x200B;**現有的輸出頁面**&#x200B;設定中選取&#x200B;**覆寫內容**&#x200B;會顯示此選項。 如果您選取此選項，則會從已發佈的AEM網站中刪除所有孤立頁面。 若要成功執行此功能，您必須發佈整個DITA map，而不使用增量發佈。<br><br>假設您已發佈DITA map，其中包含主題a.dita、b.dita和c.dita。 再次發佈對應之前，您已從對應移除b.dita主題。 現在，如果您已選取此選項，則會從AEM Sites輸出中移除與b.dita相關的所有內容，並且僅發佈a.dita和c.dita。<br><br>此功能不會移除任何已發佈的子對應。 例如，如果您的父對映包含子對映，而您移除整個子對映，則不會從發佈的輸出中刪除子對映內容。 不過，如果您從子地圖中移除任何主題並重新發佈，則移除的主題內容會從網站輸出中刪除。<br><br>此外，如果有任何參考的內容，且在重新發佈之前已移除該內容，則不會移除參考內容的資料。<br><br>**注意**：輸出產生記錄檔中也擷取了有關已刪除孤立頁面的資訊。 如需有關存取記錄檔的詳細資訊，請參閱[檢視並檢查記錄檔](generate-output-basic-troubleshooting.md#id1821I0Y0G0A__id1822G0P0CHS)。 |
| 保留暫存檔 | 選取此選項可保留DITA-OT產生的暫存檔案。 如果您在透過DITA-OT產生輸出時發生錯誤，請選取此選項以保留暫存檔案。 然後，您可以使用這些檔案來疑難排解輸出產生錯誤。<br> <br>產生輸出後，請選取&#x200B;**下載暫存檔** ![下載暫存檔圖示](images/download-temp-files-icon.png)圖示來下載包含暫存檔的ZIP資料夾。<br><br> **注意**：如果在產生期間新增檔案屬性，輸出暫存檔也會包含包含包含這些屬性的&#x200B;*metadata.xml*&#x200B;檔案。 |
| 為每個主題產生個別的PDF | 如果選取，也會針對DITA map中的每個主題建立PDF。 選擇此選項時，會顯示新的「分割PDF路徑」選項。<br><br>在「分割PDF路徑」欄位中，指定儲存針對每個主題產生的PDF的路徑。<br><br>**注意**： AEM Guides會使用名為pdfx的DITA-OT外掛程式，為每個主題產生PDF。 此外掛程式隨附於現成可用的DITA-OT套件。 您可以根據自己的需求，自訂此外掛程式以產生PDF。 如果您使用自訂DITA-OT外掛程式，請務必整合pdfx外掛程式，以擁有主題層級的PDF產生功能。 |
| 執行後期產生工作流程 | 選擇此選項時，會顯示新的「產生後工作流程」下拉式清單，其中包含AEM中設定的所有工作流程。 您必須選取要在輸出產生工作流程完成後執行的工作流程。 |
| 使用基準線 | 如果您已經為選取的DITA map建立基準線，請選取此選項以指定要發佈的版本。<br><br>**重要**：當您產生AEM網站的增量輸出時，會使用檔案的目前版本而非附加的基準線來建立輸出。<br><br>如需詳細資訊，請參閱[使用基準線](generate-output-use-baseline-for-publishing.md#id1825FI0J0PF)。 |
| 屬性 | 選取您要當作中繼資料處理的屬性。 這些屬性是從DITA map或bookmap檔案的「屬性」頁面設定的。 您從下拉式清單中選取的屬性會顯示在&#x200B;**檔案屬性**&#x200B;欄位下。 選取屬性旁的十字圖示以將其移除。 <br><br>**注意**：中繼資料屬性區分大小寫。<br><br>*如果您已選取「基準線」，則屬性的值會以所選「基準線」的版本為基礎。<br>*&#x200B;如果您尚未選取「基準線」，則屬性的值會以最新版本為基礎。<br><br>您也可以使用DITA-OT發行將中繼資料傳遞至輸出。 如需詳細資訊，請參閱[使用DITA-OT](pass-metadata-dita-ot.md#id21BJ00QD0XA)將中繼資料傳遞給輸出。<br><br>**注意**：如果您尚未在[屬性]選項中定義`cq:tags`，則即使您已選取要發佈的基準線，`cq:tags`的值也會從目前的工作復本中挑選出來。 |
| 使用地圖屬性作為預設值 | 如果選取，為對映檔案定義的屬性也會複製到未定義此類屬性的主題中。 使用此選項時，請考量下列幾點：<br><br>*只能將字串、日期或長（單一和多值）屬性傳遞至AEM Sites頁面。<br>*&#x200B;字串型別屬性的中繼資料值不支援任何特殊字元（例如`@, #, " "`）。<br>*此選項應與`Properties`選項搭配使用。 |

## AEM Sites的其他注意事項

### 從網頁編輯器產生以文章為基礎的輸出

您可以從Web編輯器產生一或多個主題的AEM Sites輸出，或產生整個DITA map。 您需要為DITA map建立輸出預設集，然後可以輕鬆為地圖產生AEM Sites輸出。 如果您已更新地圖中的幾個主題，您也可以僅從網頁編輯器為這些主題產生AEM Sites輸出。 如需詳細資訊，請參閱[從網頁編輯器](web-editor-article-publishing.md#id218CK0U019I)以文章為基礎的發佈。

### 從其他地圖產生連結主題的輸出

將大型檔案集分散到多個資料夾和DITA map中是非常常見的情況。 發佈從不同位置連結的內容會變得極為複雜。 依預設，所有連結`<xref>`都是以`local` `@scope`建立。 發佈這類主題不會有任何挑戰，因為它使用直接連結至主題。 如果主題在目前的DITA map之外，連結不會顯示連結的內容。

連結內容的另一種方式是使用`peer` `@scope`建立連結。 對於此類內容，在執行階段會透過從DITA map的發佈內容中選取檔案標題和連結主題的已設定內容來解析連結。 下列熒幕擷圖顯示具有`peer` `@scope`之連結的「屬性」面板：

![](images/peer-link-scope-link.png){width="800" align="left"}

為簡化複雜地圖及連結至其他地圖中其他主題之主題的發佈作業，AEM Guides可讓您設定每個輸出預設集的發佈內容。

發佈內容可讓您指定必須從哪個對應使用哪個主題來發佈特定輸出。 讓我們透過範例來瞭解這一點 — 假設您有四個資料夾：範例a、範例b、範例c和範例d。每個資料夾都包含一個DITA map — DITA map A、DITA map B、DITA map C和DITA map D。當DITA map A中的主題連結到DITA map B、C或D中的主題時，就會發生交叉對映連結。在下列熒幕擷圖中，範例概念主題包含其他DITA map一部分檔案的連結\（或參照\）。

![](images/sample-concept-link-to-other.png){width="350" align="left"}

現在，當您為包含此主題的對應檔案設定AEM Sites發佈設定時，可以選取在發佈時所使用的連結內容發佈內容。 發佈內容是DITA map及其輸出預設集的組合。 輸出預設集又包含特定版本的內容和條件預設集。 這個DITA map、輸出預設集、\(files\)版本和條件的完整組合定義了連結地圖的發佈內容。

執行下列步驟，指定交叉連結檔案的發佈內容：

1. 開啟您要發佈的DITA map的&#x200B;**輸出預設集**&#x200B;標籤。

1. 選取&#x200B;**AEM網站**&#x200B;輸出預設集。

   您可以取得「AEM預設集設定」和「發佈內容」標籤。

   ![](images/aem-site-publish-settings.png){width="800" align="left"}

1. 開啟&#x200B;**發佈內容**&#x200B;標籤。

   您會看到相依主題的清單。 這些是從目前地圖中的某個主題連結的主題，但它們可用於其他一些DITA地圖。

   >[!NOTE]
   >
   > 「發佈內容」標籤僅顯示使用`peer` `@scope`連結的主題。 對於具有`local` `@scope`的連結，您不需要指定發佈內容。

   依預設，所有連結的主題都會選取其最新的輸出預設集和地圖。

   ![](images/default-publish-context.png){width="800" align="left"}

1. 若要變更DITA map和預設集的預設選項，請按一下主工具列中的&#x200B;**編輯** \(Edit)。

1. 如果您想要使用對應中每個相依檔案的最近發佈輸出，請選取&#x200B;**對所有相依主題使用最近產生的發佈內容**。

1. 在&#x200B;**父對應**&#x200B;下拉式清單中，選取要連結目前對映輸出的對映檔案。

   選取對應檔案時，對應的UUID會顯示在「父對應UUID」欄中。 與所選地圖相關的輸出預設集會列在「父地圖」的「預設集」清單中。

1. 在&#x200B;**父對映的預設集**&#x200B;下拉式清單中，選取您要連結目前對映的輸出的輸出預設集。

1. 為所有相依主題選取必要的對映及其輸出預設集，然後按一下&#x200B;**完成**。

   相依主題的內容現已設定。 您可以產生目前對應的輸出。 如需有關產生輸出的詳細資訊，請參閱[從對應主控台產生DITA對應的輸出](generate-output-for-a-dita-map.md#)。

### 混合式發佈

AEM Guides支援在現有AEM網站中發佈DITA內容。 例如，如果您有現有網站，可以使用AEM Sites輸出僅在該網站上發佈DITA內容。 在此程式中，發佈程式不會修改現有的非DITA內容。 如需將網站設定為僅發佈DITA內容的詳細資訊，請連絡您的發佈管理員。

### 正在發佈`conref`

如果您在內容中使用`conref`，則它是以一般或內嵌內容發佈，連同來源\（或反向連結\）主題中的內容。 `conref`內容會與主要內容一起呈現，不會為相同內容建立個別網站頁面。 當您搜尋`conref`中參照的內容時，搜尋結果中只會顯示包含`conref`內容的主要主題或頁面。

>[!NOTE]
>
>如果您已使用AEM Guides 3.5版或更舊版本為`conref`內容產生個別頁面，則建議使用[刪除孤立的網站頁面](#delete-orphan-page-aem-site)選項來清除/刪除這些頁面。


### 搜尋內容中的字串

您可以在AEM Sites輸出中搜尋字串。 依預設，您只能在標題中搜尋字串。 若要搜尋內容中的字串或AEM Sites輸出的內文，請聯絡您的系統管理員以啟用flattening.enabled屬性。

![搜尋AEM Sites輸出](images/aem-output-search.png){width="650" align="left"}

如需詳細資訊，請參閱安裝與設定AEM指南中的&#x200B;*設定Adobe Experience Manager Guides網站節點結構的平面化*&#x200B;區段。

**父級主題：**&#x200B;[&#x200B;瞭解輸出預設集](generate-output-understand-presets.md)
